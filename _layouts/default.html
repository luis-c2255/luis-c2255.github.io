<!DOCTYPE html>
<html lang="en">
<head>
  {% include head.html %}
<script src="https://kit.fontawesome.com/dbc072e51d.js" crossorigin="anonymous"></script>
</head>

<body>
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" onclick="toggleSidebar()">☰</button>

  <div class="main-container">
    {% include sidebar.html %}

    <main class="content">
      {{ content }}
    </main>
  </div>

  {% include footer.html %}

  <script defer>
    // Función para el sidebar
    function toggleSidebar() {
      document.querySelector('.sidebar').classList.toggle('open');
    }

    // Función para el tema oscuro
    function toggleTheme() {
      const body = document.body;
      body.classList.toggle("theme-dark");
      localStorage.setItem("theme", body.classList.contains("theme-dark") ? "dark" : "light");
    }

    // Cargar tema guardado
    document.addEventListener("DOMContentLoaded", () => {
      // Tema
      if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("theme-dark");
      }

      // Animaciones fade-in
      const fadeElements = document.querySelectorAll(".fade-in");
      const fadeObserver = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add("visible");
        });
      }, { threshold: 0.2 });
      fadeElements.forEach(el => fadeObserver.observe(el));

      // Barras de habilidades
      const skillBars = document.querySelectorAll(".skill-bar-fill");
      const barObserver = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.width = entry.target.dataset.width;
          }
        });
      }, { threshold: 0.4 });
      
      skillBars.forEach(bar => {
        bar.dataset.width = bar.style.width;
        bar.style.width = "0%";
        barObserver.observe(bar);
      });
    });
  </script>
</body>
</html>
